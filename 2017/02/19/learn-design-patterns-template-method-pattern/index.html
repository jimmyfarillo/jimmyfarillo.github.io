<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Learn Design Patterns: Template Method Pattern</title>
  <meta name="description" content="A couple friends and I have a web development book club. The goal is to learn and grow together as software engineers. But really, sometimes itâ€™s more like a support group, where we use a lot of ðŸ˜ž and ðŸ˜¢ to discuss our respective screw-ups at work and the impossible vastness of information about web development and how we only know the smallest tiniest minusculest amount of it. Weâ€™re a fun groupâ€¦">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://heyjimmy.co/2017/02/19/learn-design-patterns-template-method-pattern/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Jimmy Farillo" href="https://heyjimmy.co/feed.xml">

  

  
  <meta property="og:title" content="Learn Design Patterns: Template Method Pattern">
  <meta property="og:site_name" content="Jimmy Farillo">
  <meta property="og:url" content="https://heyjimmy.co/2017/02/19/learn-design-patterns-template-method-pattern/">
  <meta property="og:description" content="A couple friends and I have a web development book club. The goal is to learn and grow together as software engineers. But really, sometimes itâ€™s more like a support group, where we use a lot of ðŸ˜ž and ðŸ˜¢ to discuss our respective screw-ups at work and the impossible vastness of information about web development and how we only know the smallest tiniest minusculest amount of it. Weâ€™re a fun groupâ€¦">
  
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Learn Design Patterns: Template Method Pattern">
  <meta name="twitter:description" content="A couple friends and I have a web development book club. The goal is to learn and grow together as software engineers. But really, sometimes itâ€™s more like a support group, where we use a lot of ðŸ˜ž ...">
  
  

  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700&display=swap" rel="stylesheet">

  

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Jimmy Farillo</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">About</a>
      
        
        <a class="page-link" href="/archives/">Archives</a>
      
        
        <a class="page-link" href="https://github.com/yous/whiteglass">GitHub</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Learn Design Patterns: Template Method Pattern</h1>
    
    <p class="post-meta"><time datetime="2017-02-19T00:00:00-05:00" itemprop="datePublished">Feb 19, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>A couple friends and I have a web development book club. The goal is to learn
and grow together as software engineers. But really, sometimes itâ€™s more like a
support group, where we use a lot of ðŸ˜ž and ðŸ˜¢ to discuss our respective
screw-ups at work and the impossible vastness of information about web
development and how we only know the smallest tiniest minusculest amount of it.
Weâ€™re a fun groupâ€¦</p>

<p>The first book we read together was <em>Practical Object-Oriented Design in Ruby</em>
by Sandi Metz. Really amazing resource for new Ruby devs (or probably any new
dev using an OO language). For our next book, we just started reading <em>Design
Patterns in Ruby</em> by Russ Olsen, so this will be the first in a planned series
about the various design patterns discussed in the book.</p>

<p>The first pattern is the template method pattern.</p>

<h2 id="inheritance--polymorphism">Inheritance + Polymorphism</h2>

<p>The template method pattern is an object-oriented design pattern that relies on
inheritance and polymorphism. By inheritance, I am talking about the
parent-child relationship between classes, where a class can be defined as a
subclass of another and inherits all of that superclassâ€™ methods. By
polymorphism, I am talking about the ability to invoke the same method on
multiple objects of different classes.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Inheritance

class Computer
  def initialize
    @on = false
  end

  def power_on
    @on = true
    puts 'Booting up...'
  end
end

class Laptop &lt; Computer
  def close_lid
    ...
  end

  def open_lid
    ...
  end
end

my_laptop = Laptop.new
my_laptop.power_on          # =&gt; Booting up...
</code></pre></div></div>

<p>In the basic inheritance example above, the <code class="language-plaintext highlighter-rouge">Computer</code> class defines the
<code class="language-plaintext highlighter-rouge">power_on</code> method. The <code class="language-plaintext highlighter-rouge">Laptop</code> class is defined as a subclass of <code class="language-plaintext highlighter-rouge">Computer</code> and
also defines its own set of methods. But since <code class="language-plaintext highlighter-rouge">Computer</code> is its superclass,
instances of <code class="language-plaintext highlighter-rouge">Laptop</code> inherit the <code class="language-plaintext highlighter-rouge">power_on</code> method and are able to be sent that
message.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Polymorphism

def too_big?(obj)
  obj.length &gt; 10
end

str = 'Hello, World!'
arr = [1, 2, 3]

too_big?(str)               # =&gt; true
too_big?(arr)               # =&gt; false
</code></pre></div></div>

<p>The polymorphism example is showing that both the <code class="language-plaintext highlighter-rouge">String</code> and <code class="language-plaintext highlighter-rouge">Array</code> classes
implement the <code class="language-plaintext highlighter-rouge">length</code> method. There is some role that they are both playing,
perhaps the role of a <code class="language-plaintext highlighter-rouge">Countable</code>. The <code class="language-plaintext highlighter-rouge">too_big?</code> method doesnâ€™t care whether it
is being passed a string or an array; it just cares whether it is being passed
an object that is countable and has implemented <code class="language-plaintext highlighter-rouge">length</code>. Being able to send the
same message to objects that are instances of different classes is polymorphism.</p>

<h2 id="the-template-method-pattern">The Template Method Pattern</h2>

<p>The template method pattern combines the concepts of inheritance and
polymorphism to solve the common programming problem of needing to allow for
some level of variation in an algorithm.</p>

<p>If you were a strange person, you might think of your life in terms of Ruby
objects and messages that you send to these objects. So if you wanted to throw a
birthday party for your niece, you might have a <code class="language-plaintext highlighter-rouge">Party</code> class with a
<code class="language-plaintext highlighter-rouge">throw_party</code> method that does all the steps necessary for giving your niece a
successful birthday party.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Party
  def throw_party
    invite_guests
    clean_house
    buy_birthday_cake
    welcome_guests
    sing_happy_birthday
    kick_out_guests
    clean_house
  end

  private

  ...all the private methods being used in throw_party...

end
</code></pre></div></div>

<p>What if you wanted to throw another party, maybe a game night for you and some
friends? It would be great to reuse this <code class="language-plaintext highlighter-rouge">Party</code> class and the <code class="language-plaintext highlighter-rouge">throw_party</code>
method, but while some parts of the method are general to any party, some parts
are very specific to birthday parties.</p>

<p>We could put in some conditionals:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Party
  def throw_party(type)
    invite_guests
    clean_house

    if type == 'birthday'
      buy_birthday_cake
    elsif type == 'game_night'
      buy_board_games
    end

    welcome_guests

    if type == 'birthday'
      sing_happy_birthday
    elsif type == 'game_night'
      play_games
    end

    kick_out_guests
    clean_house
  end

  private

  ...all the private methods being used in throw_party...

end
</code></pre></div></div>

<p>Yikes! That is not the best solution. Any time you want to throw a different
kind of party, you will have to modify this method until it grows out of
control. And youâ€™ll have to add more and more private methods to this class. But
having completely separate classes for each party type isnâ€™t ideal, either,
since we saw that most of the <code class="language-plaintext highlighter-rouge">throw_party</code> logic is common to any type of
party.</p>

<p>The template method pattern is a way of separating the parts that are the same
from the parts that are different. The parts that are the same get implemented
in a parent class while the parts that are different are implemented in the
subclasses.</p>

<p>The only parts that differ between the two party types are the buying of
supplies and the party activities. So we can create an abstract Party class
(abstract because there will be no instances of it) that will serve as the
superclass for the <code class="language-plaintext highlighter-rouge">BirthdayParty</code> and <code class="language-plaintext highlighter-rouge">GameNight</code> classes.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Party
  def throw_party
    invite_guests
    buy_supplies
    clean_house
    welcome_guests
    do_activities
    kick_out_guests
    clean_house
  end

  private

  def buy_supplies
    raise 'Not implemented: buy_supplies'
  end

  def do_activities
    raise 'Not implemented: do_activities'
  end

  ...all the other private methods being used in throw_party...

end
</code></pre></div></div>

<p>Now, all the parts that are the same can stay in <code class="language-plaintext highlighter-rouge">Party</code>, and the parts that are
different can be defined in our <code class="language-plaintext highlighter-rouge">BirthdayParty</code> and <code class="language-plaintext highlighter-rouge">GameNight</code> classes.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class BirthdayParty &lt; Party

  private

  def buy_supplies
    buy_birthday_cake
  end

  def do_activities
    sing_happy_birthday
  end

  def buy_birthday_cake
    ...
  end

  def sing_happy_birthday
    ...
  end
end

class GameNight &lt; Party

  private

  def buy_supplies
    buy_board_games
  end

  def do_activities
    play_games
  end

  def buy_board_games
    ...
  end

  def play_games
    ...
  end
end
</code></pre></div></div>

<p>The superclass is the template for what happens for a party, and each subclass
implements just the parts that vary from the template.</p>

<p>In the current implementation of <code class="language-plaintext highlighter-rouge">Party</code>, an error is raised for methods that
are meant to be implemented in the subclasses. This provides a clear signal to
anyone wanting to implement a new type of party that <code class="language-plaintext highlighter-rouge">buy_supplies</code> and
<code class="language-plaintext highlighter-rouge">do_activities</code> are methods that should be implemented in the new party type.
Another approach would be to implement these methods in <code class="language-plaintext highlighter-rouge">Party</code> with some
default behavior that the subclasses then override.</p>

<p>Back to the use of inheritance and polymorphism. It is fairly clear from the
code that <code class="language-plaintext highlighter-rouge">BirthdayParty</code> and <code class="language-plaintext highlighter-rouge">GameNight</code> are both subclasses of <code class="language-plaintext highlighter-rouge">Party</code>. So
every method defined in <code class="language-plaintext highlighter-rouge">Party</code> is also available to the subclasses. In our
example, the only publicly available method in either subclass is the
<code class="language-plaintext highlighter-rouge">throw_party</code> method defined in <code class="language-plaintext highlighter-rouge">Party</code>. Thatâ€™s where the polymorphism comes in.
Whatever object decides to throw a party can do so by sending the <code class="language-plaintext highlighter-rouge">throw_party</code>
message to an instance of either <code class="language-plaintext highlighter-rouge">BirthdayParty</code> or <code class="language-plaintext highlighter-rouge">GameNight</code>. It doesnâ€™t care
which type of object it sends the message to, and even though the results may be
different, both types of objects will respond to the message.</p>

  </div>

  

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="https://heyjimmy.co/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
